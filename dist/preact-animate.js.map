{"version":3,"file":"preact-animate.js","sources":["../src/ChildrenUtils.ts","../src/class-list.ts","../src/Event.ts","../src/css-animation.ts","../src/util.ts","../src/AnimateChild.ts","../src/Animate.ts"],"sourcesContent":["import { h } from \"preact\";\n\nexport function findChildInChildrenByKey(children, key) {\n    let ret = null;\n    if (children) {\n        children.forEach((child) => {\n            if (ret) {\n                return;\n            }\n            if (child && child.key === key) {\n                ret = child;\n            }\n        });\n    }\n    return ret;\n}\n\nexport function findShownChildInChildrenByKey(children, key, showProp) {\n    let ret = null;\n    if (children) {\n        children.forEach((child) => {\n            if (child && child.key === key && child.attributes[showProp]) {\n                if (ret) {\n                    throw new Error(\"two child with same key for <Animate> children\");\n                }\n                ret = child;\n            }\n        });\n    }\n    return ret;\n}\n\nexport function findHiddenChildInChildrenByKey(children, key, showProp) {\n    let found = false;\n    if (children) {\n        children.forEach((child) => {\n            if (found) {\n                return;\n            }\n            found = child && child.key === key && !child.attributes[showProp];\n        });\n    }\n    return found;\n}\n\nexport function isSameChildren(c1, c2, showProp) {\n    let same = c1.length === c2.length;\n    if (same) {\n        c1.forEach((child, index) => {\n            const child2 = c2[index];\n            if (child && child2) {\n                if ((child && !child2) || (!child && child2)) {\n                    same = false;\n                } else if (child.key !== child2.key) {\n                    same = false;\n                } else if (showProp && child.attributes[showProp] !== child2.attributes[showProp]) {\n                    same = false;\n                }\n            }\n        });\n    }\n    return same;\n}\n\nexport function mergeChildren(prev, next) {\n    let ret = [];\n\n    // For each key of `next`, the list of keys to insert before that key in\n    // the combined list\n    const nextChildrenPending = {};\n    let pendingChildren = [];\n    prev.forEach((child) => {\n        if (child && findChildInChildrenByKey(next, child.key)) {\n            if (pendingChildren.length) {\n                nextChildrenPending[child.key] = pendingChildren;\n                pendingChildren = [];\n            }\n        } else {\n            pendingChildren.push(child);\n        }\n    });\n\n    next.forEach((child) => {\n        if (child && nextChildrenPending.hasOwnProperty(child.key)) {\n            ret = ret.concat(nextChildrenPending[child.key]);\n        }\n        ret.push(child);\n    });\n\n    ret = ret.concat(pendingChildren);\n\n    return ret;\n}\n\nconst VNode = h(\"a\", null).constructor;\n\nexport function isValidElement(element) {\n    return element && (element instanceof VNode);\n}\n","const re = /\\s+/;\nconst toString = Object.prototype.toString;\n\nconst index = function _(arr, obj){\n    if (arr.indexOf) {\n        return arr.indexOf(obj);\n    }\n    for (let i = 0; i < arr.length; ++i) {\n        if (arr[i] === obj) {\n            return i;\n        }\n    }\n    return -1;\n};\n\nexport default class ClassList {\n    public el: Element| HTMLElement;\n    public list: any;\n    constructor(node: Element| HTMLElement) {\n        if (!node || !node.nodeType) {\n            throw new Error(\"A DOM element reference is required\");\n        }\n        this.el = node;\n        this.list = node.classList;\n    }\n    public add(name: string) {\n        // classList\n        if (this.list) {\n            this.list.add(name);\n            return this;\n        }\n        // fallback\n        const arr = this.array();\n        const i = index(arr, name);\n        if (i === -1) {\n            arr.push(name);\n        }\n        this.el.className = arr.join(\" \");\n        return this;\n    }\n    public remove(name) {\n        if (\"[object RegExp]\" === toString.call(name)) {\n          return this.removeMatching(name);\n        }\n        // classList\n        if (this.list) {\n          this.list.remove(name);\n          return this;\n        }\n        // fallback\n        const arr = this.array();\n        const i = index(arr, name);\n        if (i !== -1) {\n            arr.splice(i, 1);\n        }\n        this.el.className = arr.join(\" \");\n        return this;\n    }\n    public removeMatching(pre: RegExp) {\n        const arr = this.array();\n        for (const i of arr) {\n            if (pre.test(i)) {\n                this.remove(i);\n            }\n        }\n        return this;\n    }\n    public array() {\n        const className = this.el.getAttribute(\"class\") || \"\";\n        const str = className.replace(/^\\s+|\\s+$/g, \"\");\n        const arr = str.split(re);\n        if (\"\" === arr[0]) {\n            arr.shift();\n        }\n        return arr;\n      }\n}\n","const EVENT_NAME_MAP = {\n    transitionend: {\n        transition: \"transitionend\",\n        WebkitTransition: \"webkitTransitionEnd\",\n        MozTransition: \"mozTransitionEnd\",\n        OTransition: \"oTransitionEnd\",\n        msTransition: \"MSTransitionEnd\",\n    },\n    animationend: {\n        animation: \"animationend\",\n        WebkitAnimation: \"webkitAnimationEnd\",\n        MozAnimation: \"mozAnimationEnd\",\n        OAnimation: \"oAnimationEnd\",\n        msAnimation: \"MSAnimationEnd\",\n    },\n};\n\nconst endEvents = [];\n\nfunction detectEvents() {\n    const testEl = document.createElement(\"div\");\n    const style = testEl.style;\n\n    if (!(\"AnimationEvent\" in window)) {\n        delete EVENT_NAME_MAP.animationend.animation;\n    }\n\n    if (!(\"TransitionEvent\" in window)) {\n        delete EVENT_NAME_MAP.transitionend.transition;\n    }\n\n    for (const baseEventName in EVENT_NAME_MAP) {\n        if (EVENT_NAME_MAP.hasOwnProperty(baseEventName)) {\n            const baseEvents = EVENT_NAME_MAP[baseEventName];\n            for (const styleName in baseEvents) {\n                if (styleName in style) {\n                    endEvents.push(baseEvents[styleName]);\n                    break;\n                }\n            }\n        }\n    }\n}\n\nif (typeof window !== \"undefined\" && typeof document !== \"undefined\") {\n    detectEvents();\n}\n\nfunction addEventListener(node, eventName, eventListener) {\n    node.addEventListener(eventName, eventListener, false);\n}\nfunction removeEventListener(node, eventName, eventListener) {\n    node.removeEventListener(eventName, eventListener, false);\n}\n\nconst TransitionEvents = {\n    addEndEventListener: function addEndEventListener(node, eventListener) {\n        if (endEvents.length === 0) {\n            window.setTimeout(eventListener, 0);\n            return;\n        }\n        endEvents.forEach(function _(endEvent) {\n            addEventListener(node, endEvent, eventListener);\n        });\n    },\n    endEvents,\n    removeEndEventListener: function removeEndEventListener(node, eventListener) {\n        if (endEvents.length === 0) {\n            return;\n        }\n        endEvents.forEach(function _(endEvent) {\n            removeEventListener(node, endEvent, eventListener);\n        });\n    },\n};\n\nexport default TransitionEvents;\n","import ClassList from \"./class-list\";\nimport Event from \"./Event\";\n\ntype voidFun = () => void;\n\ninterface IEndCall {\n    end: voidFun;\n    start: voidFun;\n    active: voidFun;\n}\ninterface ITransition {\n    active: string;\n    name: string;\n}\nexport const isCssAnimationSupported = Event.endEvents.length !== 0;\nconst prefixes = [\"-webkit-\", \"-moz-\", \"-o-\", \"ms-\", \"\"];\n\nfunction getStyleProperty(node, name) {\n    const style = window.getComputedStyle(node, null);\n    let ret = \"\";\n    for (const i of prefixes) {\n        ret = style.getPropertyValue(i + name);\n        if (ret) {\n            break;\n        }\n    }\n    return ret;\n}\n\nfunction fixBrowserByTimeout(node) {\n    if (isCssAnimationSupported) {\n        const transitionDelay = parseFloat(getStyleProperty(node, \"transition-delay\")) || 0;\n        const transitionDuration = parseFloat(getStyleProperty(node, \"transition-duration\")) || 0;\n        const animationDelay = parseFloat(getStyleProperty(node, \"animation-delay\")) || 0;\n        const animationDuration = parseFloat(getStyleProperty(node, \"animation-duration\")) || 0;\n        const time = Math.max(transitionDuration + transitionDelay, animationDuration + animationDelay);\n        // sometimes, browser bug\n        node.rcEndAnimTimeout = setTimeout(function _() {\n            node.rcEndAnimTimeout = null;\n            if (node.rcEndListener) {\n                node.rcEndListener();\n            }\n        }, time * 1000 + 200);\n    }\n}\n\nfunction clearBrowserBugTimeout(node) {\n    if (node.rcEndAnimTimeout) {\n        clearTimeout(node.rcEndAnimTimeout);\n        node.rcEndAnimTimeout = null;\n    }\n}\nfunction cssAnimate(node: Element | HTMLElement, transitionName: string | ITransition, endCallback: voidFun | IEndCall): { stop: voidFun } {\n    const nameIsObj = typeof transitionName === \"undefined\" ? \"undefined\" : typeof transitionName === \"object\";\n    const className = nameIsObj ? (transitionName as ITransition).name : (transitionName as string);\n    const activeClassName = nameIsObj ? (transitionName as ITransition).active : transitionName + \"-active\";\n    let end = endCallback;\n    let start = void 0;\n    let active = void 0;\n    const nodeClasses = new ClassList(node);\n\n    if (endCallback && Object.prototype.toString.call(endCallback) === \"[object Object]\") {\n        end = (endCallback as IEndCall).end;\n        start = (endCallback as IEndCall).start;\n        active = (endCallback as IEndCall).active;\n    }\n    if ((node as any).rcEndListener) {\n        (node as any).rcEndListener();\n    }\n    (node as any).rcEndListener = function _(e) {\n        if (e && e.target !== node) {\n            return;\n        }\n        if ((node as any).rcAnimTimeout) {\n            clearTimeout((node as any).rcAnimTimeout);\n            (node as any).rcAnimTimeout = null;\n        }\n        clearBrowserBugTimeout(node);\n        nodeClasses.remove(className);\n        nodeClasses.remove(activeClassName);\n        Event.removeEndEventListener(node, (node as any).rcEndListener);\n        (node as any).rcEndListener = null;\n        if (end) {\n            (end as voidFun)();\n        }\n    };\n    Event.addEndEventListener(node, (node as any).rcEndListener);\n    if (start) {\n        start();\n    }\n    nodeClasses.add(className);\n    (node as any).rcAnimTimeout = setTimeout(function _() {\n        (node as any).rcAnimTimeout = null;\n        nodeClasses.add(activeClassName);\n        if (active) {\n            setTimeout(active, 0);\n        }\n        fixBrowserByTimeout(node);\n        // 30ms for firefox\n    }, 30);\n    return {\n        stop: function stop() {\n            if ((node as any).rcEndListener) {\n                (node as any).rcEndListener();\n            }\n        },\n    };\n}\n(cssAnimate as any).isCssAnimationSupported = isCssAnimationSupported;\n\nexport default cssAnimate;\n","import { Component } from \"preact\";\n\nconst util = {\n    isAppearSupported(props: any) {\n        return props.transitionName && props.transitionAppear || props.animation.appear;\n    },\n    isEnterSupported(props: any) {\n        return props.transitionName && props.transitionEnter || props.animation.enter;\n    },\n    isLeaveSupported(props: any) {\n        return props.transitionName && props.transitionLeave || props.animation.leave;\n    },\n    allowAppearCallback(props: any) {\n        return props.transitionAppear || props.animation.appear;\n    },\n    allowEnterCallback(props: any) {\n        return props.transitionEnter || props.animation.enter;\n    },\n    allowLeaveCallback(props: any) {\n        return props.transitionLeave || props.animation.leave;\n    },\n    findDOMNode(component: Component<any, any>) {\n        if (!(component as any).base && (component as any).vdom) {\n            return component && (component as any).vdom && (component as any).vdom.base || component;\n        } else {\n            return (component as any).base || component;\n        }\n    },\n};\nexport default util;\n","import { Component } from \"preact\";\nimport cssAnimate, { isCssAnimationSupported } from \"./css-animation\";\nimport animUtil from \"./util\";\n\nconst transitionMap = {\n    enter: \"transitionEnter\",\n    appear: \"transitionAppear\",\n    leave: \"transitionLeave\",\n};\n\ninterface IAnimateChildProps {\n    key: string;\n    animation: object;\n    transitionName: string|object;\n    transitionEnter: boolean;\n    transitionAppear: boolean;\n    transitionLeave: boolean;\n}\n\nexport default class AnimateChild extends Component<IAnimateChildProps, any> {\n    public stopper: null | { stop: () => void};\n    public componentWillUnmount() {\n        this.stop();\n    }\n\n    public componentWillEnter(done: () => void) {\n        if (animUtil.isEnterSupported(this.props)) {\n            this.transition(\"enter\", done);\n        } else {\n            done();\n        }\n    }\n\n    public componentWillAppear(done: () => void) {\n        if (animUtil.isAppearSupported(this.props)) {\n            this.transition(\"appear\", done);\n        } else {\n            done();\n        }\n    }\n\n    public componentWillLeave(done: () => void) {\n        if (animUtil.isLeaveSupported(this.props)) {\n            this.transition(\"leave\", done);\n        } else {\n            // always sync, do not interupt with react component life cycle\n            // update hidden -> animate hidden ->\n            // didUpdate -> animate leave -> unmount (if animate is none)\n            done();\n        }\n    }\n\n    private transition(animationType: string, finishCallback: () => void) {\n        const node = animUtil.findDOMNode(this);\n        const props = this.props;\n        const transitionName = props.transitionName;\n        const nameIsObj = typeof transitionName === \"object\";\n        this.stop();\n        const end = () => {\n            this.stopper = null;\n            finishCallback();\n        };\n        if ((isCssAnimationSupported || !props.animation[animationType]) &&\n                transitionName && props[transitionMap[animationType]]) {\n            const name = nameIsObj ? (transitionName as object)[animationType] : `${transitionName}-${animationType}`;\n            let activeName = `${name}-active`;\n            if (nameIsObj && (transitionName as object)[`${animationType}Active`]) {\n                activeName = (transitionName as object)[`${animationType}Active`];\n            }\n            this.stopper = cssAnimate(node, {\n                name,\n                active: activeName,\n            }, end);\n        } else {\n            this.stopper = props.animation[animationType](node, end);\n        }\n    }\n\n    public stop() {\n        const stopper = this.stopper;\n        if (stopper) {\n            this.stopper = null;\n            stopper.stop();\n        }\n    }\n\n    public render() {\n        return this.props.children && this.props.children[0];\n    }\n}\n","import { h, Component, cloneElement } from \"preact\";\n// import PropTypes from \"prop-types\";\nimport {\n    mergeChildren,\n    findShownChildInChildrenByKey,\n    findChildInChildrenByKey,\n    isSameChildren,\n    isValidElement,\n} from \"./ChildrenUtils\";\nimport AnimateChild from \"./AnimateChild\";\nconst defaultKey = `rc_animate_${Date.now()}`;\nimport animUtil from \"./util\";\n\nfunction getChildrenFromProps(props: IAnimateProps) {\n    const children = props.children;\n    const newChildren = [];\n    children.forEach((child) => {\n        if (isValidElement(child)) {\n            if (!child.key) {\n                child = cloneElement(child, {\n                    key: defaultKey,\n                });\n            }\n            newChildren.push(child);\n        }\n    });\n    return newChildren;\n}\n\nfunction noop() {\n}\n\ninterface IAnimateProps {\n    component: any;\n    componentProps: object;\n    animation: object;\n    transitionName: string|object;\n    transitionEnter: boolean;\n    transitionAppear: boolean;\n    transitionLeave: boolean;\n    exclusive: boolean;\n    onEnd: (key: string, exists: boolean) => void;\n    onEnter: (key: string) => void;\n    onLeave: (key: string) => void;\n    onAppear: (key: string) => void;\n    showProp: string;\n    className?: string;\n    style?: string|object;\n    children: any[];\n}\ninterface IAnimateState {\n    children: any[];\n}\n\nexport default class Animate extends Component<IAnimateProps, IAnimateState> {\n    public currentlyAnimatingKeys: {\n        [key: string]: boolean;\n    };\n    public keysToEnter: string[];\n    public keysToLeave: string[];\n    public childrenRefs: {\n        [key: string]: AnimateChild;\n    };\n    public nextProps;\n\n    public static defaultProps = {\n        animation: {},\n        component: \"span\",\n        componentProps: {},\n        transitionEnter: true,\n        transitionLeave: true,\n        transitionAppear: false,\n        onEnd: noop,\n        onEnter: noop,\n        onLeave: noop,\n        onAppear: noop,\n    };\n\n    constructor(props: IAnimateProps, c) {\n        super(props, c);\n\n        this.currentlyAnimatingKeys = {};\n        this.keysToEnter = [];\n        this.keysToLeave = [];\n\n        this.state = {\n            children: getChildrenFromProps(this.props),\n        };\n\n        this.childrenRefs = {};\n    }\n\n    public componentDidMount() {\n        const showProp = this.props.showProp;\n        let children = this.state.children;\n        if (showProp) {\n            children = children.filter((child) => {\n                return !!child.attributes[showProp];\n            });\n        }\n        children.forEach((child) => {\n            if (child) {\n                this.performAppear(child.key);\n            }\n        });\n    }\n\n    public componentWillReceiveProps(nextProps, nextContext) {\n        this.nextProps = nextProps;\n        const nextChildren = getChildrenFromProps(nextProps);\n        const props = this.props;\n        // exclusive needs immediate response\n        if (props.exclusive) {\n            Object.keys(this.currentlyAnimatingKeys).forEach((key) => {\n                this.stop(key);\n            });\n        }\n        const showProp = props.showProp;\n        const currentlyAnimatingKeys = this.currentlyAnimatingKeys;\n        // last props children if exclusive\n        const currentChildren = props.exclusive ?\n            getChildrenFromProps(props) : this.state.children;\n        // in case destroy in showProp mode\n        let newChildren = [];\n        if (showProp) {\n            currentChildren.forEach((currentChild) => {\n                const nextChild = currentChild && findChildInChildrenByKey(nextChildren, currentChild.key);\n                let newChild;\n                if ((!nextChild || !nextChild.attributes[showProp]) && currentChild.attributes[showProp]) {\n                    newChild = cloneElement(nextChild || currentChild, {\n                        [showProp]: true,\n                        style: \"\",\n                    });\n                } else {\n                    newChild = nextChild;\n                }\n                if (newChild) {\n                    newChildren.push(newChild);\n                }\n            });\n            nextChildren.forEach((nextChild) => {\n                if (!nextChild || !findChildInChildrenByKey(currentChildren, nextChild.key)) {\n                    newChildren.push(nextChild);\n                }\n            });\n        } else {\n            newChildren = mergeChildren(\n                currentChildren,\n                nextChildren,\n            );\n        }\n\n        // need render to avoid update\n        this.setState({\n            children: newChildren,\n        });\n\n        nextChildren.forEach((child) => {\n            const key = child && child.key;\n            if (child && currentlyAnimatingKeys[key]) {\n                return;\n            }\n            const hasPrev = child && findChildInChildrenByKey(currentChildren, key);\n            if (showProp) {\n                const showInNext = child.attributes[showProp];\n                if (hasPrev) {\n                    const showInNow = findShownChildInChildrenByKey(currentChildren, key, showProp);\n                    if (!showInNow && showInNext) {\n                    this.keysToEnter.push(key);\n                    }\n                } else if (showInNext) {\n                    this.keysToEnter.push(key);\n                }\n            } else if (!hasPrev) {\n                this.keysToEnter.push(key);\n            }\n        });\n\n        currentChildren.forEach((child) => {\n            const key = child && child.key;\n            if (child && currentlyAnimatingKeys[key]) {\n                return;\n            }\n            const hasNext = child && findChildInChildrenByKey(nextChildren, key);\n            if (showProp) {\n                const showInNow = child.attributes[showProp];\n                if (hasNext) {\n                    const showInNext = findShownChildInChildrenByKey(nextChildren, key, showProp);\n                    if (!showInNext && showInNow) {\n                        this.keysToLeave.push(key);\n                    }\n                } else if (showInNow) {\n                    this.keysToLeave.push(key);\n                }\n            } else if (!hasNext) {\n                this.keysToLeave.push(key);\n            }\n        });\n\n    }\n\n    public componentDidUpdate() {\n        const keysToEnter = this.keysToEnter;\n        this.keysToEnter = [];\n        keysToEnter.forEach(this.performEnter);\n        const keysToLeave = this.keysToLeave;\n        this.keysToLeave = [];\n        keysToLeave.forEach(this.performLeave);\n    }\n\n    public performEnter = (key) => {\n        // may already remove by exclusive\n        if (this.childrenRefs[key]) {\n            this.currentlyAnimatingKeys[key] = true;\n            this.childrenRefs[key].componentWillEnter(\n                this.handleDoneAdding.bind(this, key, \"enter\"),\n            );\n        }\n    }\n\n    public performAppear = (key) => {\n        if (this.childrenRefs[key]) {\n            this.currentlyAnimatingKeys[key] = true;\n            this.childrenRefs[key].componentWillAppear(\n                this.handleDoneAdding.bind(this, key, \"appear\"),\n            );\n        }\n    }\n\n    public handleDoneAdding = (key, type) => {\n        const props = this.props;\n        delete this.currentlyAnimatingKeys[key];\n        // if update on exclusive mode, skip check\n        if (props.exclusive && props !== this.nextProps) {\n            return;\n        }\n        const currentChildren = getChildrenFromProps(props);\n        if (!this.isValidChildByKey(currentChildren, key)) {\n            // exclusive will not need this\n            this.performLeave(key);\n        } else {\n            if (type === \"appear\") {\n                if (animUtil.allowAppearCallback(props)) {\n                    props.onAppear(key);\n                    props.onEnd(key, true);\n                }\n            } else {\n                if (animUtil.allowEnterCallback(props)) {\n                    props.onEnter(key);\n                    props.onEnd(key, true);\n                }\n            }\n        }\n    }\n\n    public performLeave = (key) => {\n        // may already remove by exclusive\n        if (this.childrenRefs[key]) {\n            this.currentlyAnimatingKeys[key] = true;\n            this.childrenRefs[key].componentWillLeave(this.handleDoneLeaving.bind(this, key));\n        }\n    }\n\n    public handleDoneLeaving = (key: string) => {\n        const props = this.props;\n        delete this.currentlyAnimatingKeys[key];\n        // if update on exclusive mode, skip check\n        if (props.exclusive && props !== this.nextProps) {\n            return;\n        }\n        const currentChildren = getChildrenFromProps(props);\n        // in case state change is too fast\n        if (this.isValidChildByKey(currentChildren, key)) {\n            this.performEnter(key);\n        } else {\n            const end = () => {\n                if (animUtil.allowLeaveCallback(props)) {\n                    props.onLeave(key);\n                    props.onEnd(key, false);\n                }\n            };\n            if (!isSameChildren(this.state.children,\n                currentChildren, props.showProp)) {\n                let newChildren = null;\n                if (props.showProp) {\n                    newChildren = currentChildren.map((child) => {\n                        if (child.key === key) {\n                            return cloneElement(\n                                child,\n                                {\n                                    style: \"display: none;\",\n                                },\n                            );\n                        } else {\n                            return child;\n                        }\n                    });\n                }\n                // sync update\n                this.state.children = newChildren || currentChildren;\n                this.forceUpdate(end);\n            } else {\n                end();\n            }\n        }\n    }\n\n    public isValidChildByKey(currentChildren, key) {\n        const showProp = this.props.showProp;\n        if (showProp) {\n            return findShownChildInChildrenByKey(currentChildren, key, showProp);\n        }\n        return findChildInChildrenByKey(currentChildren, key);\n    }\n\n    public stop(key: string) {\n        delete this.currentlyAnimatingKeys[key];\n        const component = this.childrenRefs[key];\n        if (component) {\n            component.stop();\n        }\n    }\n\n    public render() {\n        const props = this.props;\n        this.nextProps = props;\n        const stateChildren = this.state.children;\n        let children = null;\n        if (stateChildren) {\n            children = stateChildren.map((child) => {\n            if (child === null || child === undefined) {\n                return child;\n            }\n            if (!child.key) {\n                throw new Error(\"must set key for <rc-animate> children\");\n            }\n            const refFun = (node) => {\n                this.childrenRefs[child.key] = node;\n            };\n            return h(\n                (AnimateChild as any),\n                {\n                    key: child.key,\n                    ref: refFun,\n                    animation: props.animation,\n                    transitionEnter: props.transitionEnter,\n                    transitionAppear: props.transitionAppear,\n                    transitionName: props.transitionName,\n                    transitionLeave: props.transitionLeave,\n                },\n                child);\n            });\n        }\n        const _Component = props.component;\n        if (_Component) {\n            let passedProps: any = props;\n            if (typeof _Component === \"string\") {\n                passedProps = {\n                    className: props.className,\n                    style: props.style,\n                    ...props.componentProps,\n                };\n            }\n            return h(_Component, {...passedProps}, children);\n        }\n        return children[0] || null;\n    }\n}\n"],"names":["h","Event","animUtil","Component","cloneElement"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;kCAEyC,QAAQ,EAAE,GAAG;IAClD,IAAI,GAAG,GAAG,IAAI,CAAC;IACf,IAAI,QAAQ,EAAE;QACV,QAAQ,CAAC,OAAO,CAAC,UAAC,KAAK;YACnB,IAAI,GAAG,EAAE;gBACL,OAAO;aACV;YACD,IAAI,KAAK,IAAI,KAAK,CAAC,GAAG,KAAK,GAAG,EAAE;gBAC5B,GAAG,GAAG,KAAK,CAAC;aACf;SACJ,CAAC,CAAC;KACN;IACD,OAAO,GAAG,CAAC;CACd;AAED,uCAA8C,QAAQ,EAAE,GAAG,EAAE,QAAQ;IACjE,IAAI,GAAG,GAAG,IAAI,CAAC;IACf,IAAI,QAAQ,EAAE;QACV,QAAQ,CAAC,OAAO,CAAC,UAAC,KAAK;YACnB,IAAI,KAAK,IAAI,KAAK,CAAC,GAAG,KAAK,GAAG,IAAI,KAAK,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE;gBAC1D,IAAI,GAAG,EAAE;oBACL,MAAM,IAAI,KAAK,CAAC,gDAAgD,CAAC,CAAC;iBACrE;gBACD,GAAG,GAAG,KAAK,CAAC;aACf;SACJ,CAAC,CAAC;KACN;IACD,OAAO,GAAG,CAAC;CACd;AAED,AAWC;AAED,wBAA+B,EAAE,EAAE,EAAE,EAAE,QAAQ;IAC3C,IAAI,IAAI,GAAG,EAAE,CAAC,MAAM,KAAK,EAAE,CAAC,MAAM,CAAC;IACnC,IAAI,IAAI,EAAE;QACN,EAAE,CAAC,OAAO,CAAC,UAAC,KAAK,EAAE,KAAK;YACpB,IAAM,MAAM,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC;YACzB,IAAI,KAAK,IAAI,MAAM,EAAE;gBACjB,IAAI,CAAC,KAAK,IAAI,CAAC,MAAM,MAAM,CAAC,KAAK,IAAI,MAAM,CAAC,EAAE;oBAC1C,IAAI,GAAG,KAAK,CAAC;iBAChB;qBAAM,IAAI,KAAK,CAAC,GAAG,KAAK,MAAM,CAAC,GAAG,EAAE;oBACjC,IAAI,GAAG,KAAK,CAAC;iBAChB;qBAAM,IAAI,QAAQ,IAAI,KAAK,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE;oBAC/E,IAAI,GAAG,KAAK,CAAC;iBAChB;aACJ;SACJ,CAAC,CAAC;KACN;IACD,OAAO,IAAI,CAAC;CACf;AAED,uBAA8B,IAAI,EAAE,IAAI;IACpC,IAAI,GAAG,GAAG,EAAE,CAAC;;;IAIb,IAAM,mBAAmB,GAAG,EAAE,CAAC;IAC/B,IAAI,eAAe,GAAG,EAAE,CAAC;IACzB,IAAI,CAAC,OAAO,CAAC,UAAC,KAAK;QACf,IAAI,KAAK,IAAI,wBAAwB,CAAC,IAAI,EAAE,KAAK,CAAC,GAAG,CAAC,EAAE;YACpD,IAAI,eAAe,CAAC,MAAM,EAAE;gBACxB,mBAAmB,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,eAAe,CAAC;gBACjD,eAAe,GAAG,EAAE,CAAC;aACxB;SACJ;aAAM;YACH,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SAC/B;KACJ,CAAC,CAAC;IAEH,IAAI,CAAC,OAAO,CAAC,UAAC,KAAK;QACf,IAAI,KAAK,IAAI,mBAAmB,CAAC,cAAc,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;YACxD,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,mBAAmB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;SACpD;QACD,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACnB,CAAC,CAAC;IAEH,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;IAElC,OAAO,GAAG,CAAC;CACd;AAED,IAAM,KAAK,GAAGA,QAAC,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,WAAW,CAAC;AAEvC,wBAA+B,OAAO;IAClC,OAAO,OAAO,KAAK,OAAO,YAAY,KAAK,CAAC,CAAC;CAChD;;AClGD,IAAM,EAAE,GAAG,KAAK,CAAC;AACjB,IAAM,QAAQ,GAAG,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC;AAE3C,IAAM,KAAK,GAAG,WAAW,GAAG,EAAE,GAAG;IAC7B,IAAI,GAAG,CAAC,OAAO,EAAE;QACb,OAAO,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;KAC3B;IACD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;QACjC,IAAI,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;YAChB,OAAO,CAAC,CAAC;SACZ;KACJ;IACD,OAAO,CAAC,CAAC,CAAC;CACb,CAAC;AAEa;IAGX,mBAAY,IAA0B;QAClC,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YACzB,MAAM,IAAI,KAAK,CAAC,qCAAqC,CAAC,CAAC;SAC1D;QACD,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC;QACf,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC;KAC9B;IACM,uBAAG,GAAV,UAAW,IAAY;;QAEnB,IAAI,IAAI,CAAC,IAAI,EAAE;YACX,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YACpB,OAAO,IAAI,CAAC;SACf;;QAED,IAAM,GAAG,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;QACzB,IAAM,CAAC,GAAG,KAAK,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;QAC3B,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;YACV,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAClB;QACD,IAAI,CAAC,EAAE,CAAC,SAAS,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAClC,OAAO,IAAI,CAAC;KACf;IACM,0BAAM,GAAb,UAAc,IAAI;QACd,IAAI,iBAAiB,KAAK,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YAC7C,OAAO,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;SAClC;;QAED,IAAI,IAAI,CAAC,IAAI,EAAE;YACb,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YACvB,OAAO,IAAI,CAAC;SACb;;QAED,IAAM,GAAG,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;QACzB,IAAM,CAAC,GAAG,KAAK,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;QAC3B,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;YACV,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;SACpB;QACD,IAAI,CAAC,EAAE,CAAC,SAAS,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAClC,OAAO,IAAI,CAAC;KACf;IACM,kCAAc,GAArB,UAAsB,GAAW;QAC7B,IAAM,GAAG,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;QACzB,KAAgB,UAAG,EAAH,WAAG,EAAH,iBAAG,EAAH,IAAG;YAAd,IAAM,CAAC,YAAA;YACR,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;gBACb,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;aAClB;SACJ;QACD,OAAO,IAAI,CAAC;KACf;IACM,yBAAK,GAAZ;QACI,IAAM,SAAS,GAAG,IAAI,CAAC,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QACtD,IAAM,GAAG,GAAG,SAAS,CAAC,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC;QAChD,IAAM,GAAG,GAAG,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QAC1B,IAAI,EAAE,KAAK,GAAG,CAAC,CAAC,CAAC,EAAE;YACf,GAAG,CAAC,KAAK,EAAE,CAAC;SACf;QACD,OAAO,GAAG,CAAC;KACZ;IACP,gBAAC;CAAA;;AC5ED,IAAM,cAAc,GAAG;IACnB,aAAa,EAAE;QACX,UAAU,EAAE,eAAe;QAC3B,gBAAgB,EAAE,qBAAqB;QACvC,aAAa,EAAE,kBAAkB;QACjC,WAAW,EAAE,gBAAgB;QAC7B,YAAY,EAAE,iBAAiB;KAClC;IACD,YAAY,EAAE;QACV,SAAS,EAAE,cAAc;QACzB,eAAe,EAAE,oBAAoB;QACrC,YAAY,EAAE,iBAAiB;QAC/B,UAAU,EAAE,eAAe;QAC3B,WAAW,EAAE,gBAAgB;KAChC;CACJ,CAAC;AAEF,IAAM,SAAS,GAAG,EAAE,CAAC;AAErB;IACI,IAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IAC7C,IAAM,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;IAE3B,IAAI,EAAE,gBAAgB,IAAI,MAAM,CAAC,EAAE;QAC/B,OAAO,cAAc,CAAC,YAAY,CAAC,SAAS,CAAC;KAChD;IAED,IAAI,EAAE,iBAAiB,IAAI,MAAM,CAAC,EAAE;QAChC,OAAO,cAAc,CAAC,aAAa,CAAC,UAAU,CAAC;KAClD;IAED,KAAK,IAAM,aAAa,IAAI,cAAc,EAAE;QACxC,IAAI,cAAc,CAAC,cAAc,CAAC,aAAa,CAAC,EAAE;YAC9C,IAAM,UAAU,GAAG,cAAc,CAAC,aAAa,CAAC,CAAC;YACjD,KAAK,IAAM,SAAS,IAAI,UAAU,EAAE;gBAChC,IAAI,SAAS,IAAI,KAAK,EAAE;oBACpB,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC;oBACtC,MAAM;iBACT;aACJ;SACJ;KACJ;CACJ;AAED,IAAI,OAAO,MAAM,KAAK,WAAW,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE;IAClE,YAAY,EAAE,CAAC;CAClB;AAED,0BAA0B,IAAI,EAAE,SAAS,EAAE,aAAa;IACpD,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,aAAa,EAAE,KAAK,CAAC,CAAC;CAC1D;AACD,6BAA6B,IAAI,EAAE,SAAS,EAAE,aAAa;IACvD,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE,aAAa,EAAE,KAAK,CAAC,CAAC;CAC7D;AAED,IAAM,gBAAgB,GAAG;IACrB,mBAAmB,EAAE,6BAA6B,IAAI,EAAE,aAAa;QACjE,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;YACxB,MAAM,CAAC,UAAU,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;YACpC,OAAO;SACV;QACD,SAAS,CAAC,OAAO,CAAC,WAAW,QAAQ;YACjC,gBAAgB,CAAC,IAAI,EAAE,QAAQ,EAAE,aAAa,CAAC,CAAC;SACnD,CAAC,CAAC;KACN;IACD,SAAS,WAAA;IACT,sBAAsB,EAAE,gCAAgC,IAAI,EAAE,aAAa;QACvE,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;YACxB,OAAO;SACV;QACD,SAAS,CAAC,OAAO,CAAC,WAAW,QAAQ;YACjC,mBAAmB,CAAC,IAAI,EAAE,QAAQ,EAAE,aAAa,CAAC,CAAC;SACtD,CAAC,CAAC;KACN;CACJ;;AC5DM,IAAM,uBAAuB,GAAGC,gBAAK,CAAC,SAAS,CAAC,MAAM,KAAK,CAAC,CAAC;AACpE,IAAM,QAAQ,GAAG,CAAC,UAAU,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC;AAEzD,0BAA0B,IAAI,EAAE,IAAI;IAChC,IAAM,KAAK,GAAG,MAAM,CAAC,gBAAgB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IAClD,IAAI,GAAG,GAAG,EAAE,CAAC;IACb,KAAgB,UAAQ,EAAR,qBAAQ,EAAR,sBAAQ,EAAR,IAAQ;QAAnB,IAAM,CAAC,iBAAA;QACR,GAAG,GAAG,KAAK,CAAC,gBAAgB,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;QACvC,IAAI,GAAG,EAAE;YACL,MAAM;SACT;KACJ;IACD,OAAO,GAAG,CAAC;CACd;AAED,6BAA6B,IAAI;IAC7B,IAAI,uBAAuB,EAAE;QACzB,IAAM,eAAe,GAAG,UAAU,CAAC,gBAAgB,CAAC,IAAI,EAAE,kBAAkB,CAAC,CAAC,IAAI,CAAC,CAAC;QACpF,IAAM,kBAAkB,GAAG,UAAU,CAAC,gBAAgB,CAAC,IAAI,EAAE,qBAAqB,CAAC,CAAC,IAAI,CAAC,CAAC;QAC1F,IAAM,cAAc,GAAG,UAAU,CAAC,gBAAgB,CAAC,IAAI,EAAE,iBAAiB,CAAC,CAAC,IAAI,CAAC,CAAC;QAClF,IAAM,iBAAiB,GAAG,UAAU,CAAC,gBAAgB,CAAC,IAAI,EAAE,oBAAoB,CAAC,CAAC,IAAI,CAAC,CAAC;QACxF,IAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,kBAAkB,GAAG,eAAe,EAAE,iBAAiB,GAAG,cAAc,CAAC,CAAC;;QAEhG,IAAI,CAAC,gBAAgB,GAAG,UAAU,CAAC;YAC/B,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;YAC7B,IAAI,IAAI,CAAC,aAAa,EAAE;gBACpB,IAAI,CAAC,aAAa,EAAE,CAAC;aACxB;SACJ,EAAE,IAAI,GAAG,IAAI,GAAG,GAAG,CAAC,CAAC;KACzB;CACJ;AAED,gCAAgC,IAAI;IAChC,IAAI,IAAI,CAAC,gBAAgB,EAAE;QACvB,YAAY,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QACpC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;KAChC;CACJ;AACD,oBAAoB,IAA2B,EAAE,cAAoC,EAAE,WAA+B;IAClH,IAAM,SAAS,GAAG,OAAO,cAAc,KAAK,WAAW,GAAG,WAAW,GAAG,OAAO,cAAc,KAAK,QAAQ,CAAC;IAC3G,IAAM,SAAS,GAAG,SAAS,GAAI,cAA8B,CAAC,IAAI,GAAI,cAAyB,CAAC;IAChG,IAAM,eAAe,GAAG,SAAS,GAAI,cAA8B,CAAC,MAAM,GAAG,cAAc,GAAG,SAAS,CAAC;IACxG,IAAI,GAAG,GAAG,WAAW,CAAC;IACtB,IAAI,KAAK,GAAG,KAAK,CAAC,CAAC;IACnB,IAAI,MAAM,GAAG,KAAK,CAAC,CAAC;IACpB,IAAM,WAAW,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,CAAC;IAExC,IAAI,WAAW,IAAI,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,iBAAiB,EAAE;QAClF,GAAG,GAAI,WAAwB,CAAC,GAAG,CAAC;QACpC,KAAK,GAAI,WAAwB,CAAC,KAAK,CAAC;QACxC,MAAM,GAAI,WAAwB,CAAC,MAAM,CAAC;KAC7C;IACD,IAAK,IAAY,CAAC,aAAa,EAAE;QAC5B,IAAY,CAAC,aAAa,EAAE,CAAC;KACjC;IACA,IAAY,CAAC,aAAa,GAAG,WAAW,CAAC;QACtC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,KAAK,IAAI,EAAE;YACxB,OAAO;SACV;QACD,IAAK,IAAY,CAAC,aAAa,EAAE;YAC7B,YAAY,CAAE,IAAY,CAAC,aAAa,CAAC,CAAC;YACzC,IAAY,CAAC,aAAa,GAAG,IAAI,CAAC;SACtC;QACD,sBAAsB,CAAC,IAAI,CAAC,CAAC;QAC7B,WAAW,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QAC9B,WAAW,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;QACpCA,gBAAK,CAAC,sBAAsB,CAAC,IAAI,EAAG,IAAY,CAAC,aAAa,CAAC,CAAC;QAC/D,IAAY,CAAC,aAAa,GAAG,IAAI,CAAC;QACnC,IAAI,GAAG,EAAE;YACJ,GAAe,EAAE,CAAC;SACtB;KACJ,CAAC;IACFA,gBAAK,CAAC,mBAAmB,CAAC,IAAI,EAAG,IAAY,CAAC,aAAa,CAAC,CAAC;IAC7D,IAAI,KAAK,EAAE;QACP,KAAK,EAAE,CAAC;KACX;IACD,WAAW,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;IAC1B,IAAY,CAAC,aAAa,GAAG,UAAU,CAAC;QACpC,IAAY,CAAC,aAAa,GAAG,IAAI,CAAC;QACnC,WAAW,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;QACjC,IAAI,MAAM,EAAE;YACR,UAAU,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;SACzB;QACD,mBAAmB,CAAC,IAAI,CAAC,CAAC;;KAE7B,EAAE,EAAE,CAAC,CAAC;IACP,OAAO;QACH,IAAI,EAAE;YACF,IAAK,IAAY,CAAC,aAAa,EAAE;gBAC5B,IAAY,CAAC,aAAa,EAAE,CAAC;aACjC;SACJ;KACJ,CAAC;CACL;AACA,UAAkB,CAAC,uBAAuB,GAAG,uBAAuB,CAAC;;AC1GtE,IAAM,IAAI,GAAG;IACT,iBAAiB,YAAC,KAAU;QACxB,OAAO,KAAK,CAAC,cAAc,IAAI,KAAK,CAAC,gBAAgB,IAAI,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC;KACnF;IACD,gBAAgB,YAAC,KAAU;QACvB,OAAO,KAAK,CAAC,cAAc,IAAI,KAAK,CAAC,eAAe,IAAI,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC;KACjF;IACD,gBAAgB,YAAC,KAAU;QACvB,OAAO,KAAK,CAAC,cAAc,IAAI,KAAK,CAAC,eAAe,IAAI,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC;KACjF;IACD,mBAAmB,YAAC,KAAU;QAC1B,OAAO,KAAK,CAAC,gBAAgB,IAAI,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC;KAC3D;IACD,kBAAkB,YAAC,KAAU;QACzB,OAAO,KAAK,CAAC,eAAe,IAAI,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC;KACzD;IACD,kBAAkB,YAAC,KAAU;QACzB,OAAO,KAAK,CAAC,eAAe,IAAI,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC;KACzD;IACD,WAAW,YAAC,SAA8B;QACtC,IAAI,CAAE,SAAiB,CAAC,IAAI,IAAK,SAAiB,CAAC,IAAI,EAAE;YACrD,OAAO,SAAS,IAAK,SAAiB,CAAC,IAAI,IAAK,SAAiB,CAAC,IAAI,CAAC,IAAI,IAAI,SAAS,CAAC;SAC5F;aAAM;YACH,OAAQ,SAAiB,CAAC,IAAI,IAAI,SAAS,CAAC;SAC/C;KACJ;CACJ;;ACxBD,IAAM,aAAa,GAAG;IAClB,KAAK,EAAE,iBAAiB;IACxB,MAAM,EAAE,kBAAkB;IAC1B,KAAK,EAAE,iBAAiB;CAC3B,CAAC;AAWa;IAA2B,gCAAkC;IAA7D;;KAsEd;IApEU,2CAAoB,GAA3B;QACI,IAAI,CAAC,IAAI,EAAE,CAAC;KACf;IAEM,yCAAkB,GAAzB,UAA0B,IAAgB;QACtC,IAAIC,IAAQ,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;YACvC,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;SAClC;aAAM;YACH,IAAI,EAAE,CAAC;SACV;KACJ;IAEM,0CAAmB,GAA1B,UAA2B,IAAgB;QACvC,IAAIA,IAAQ,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;YACxC,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;SACnC;aAAM;YACH,IAAI,EAAE,CAAC;SACV;KACJ;IAEM,yCAAkB,GAAzB,UAA0B,IAAgB;QACtC,IAAIA,IAAQ,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;YACvC,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;SAClC;aAAM;;;;YAIH,IAAI,EAAE,CAAC;SACV;KACJ;IAEO,iCAAU,GAAlB,UAAmB,aAAqB,EAAE,cAA0B;QAApE,iBAwBC;QAvBG,IAAM,IAAI,GAAGA,IAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QACxC,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QACzB,IAAM,cAAc,GAAG,KAAK,CAAC,cAAc,CAAC;QAC5C,IAAM,SAAS,GAAG,OAAO,cAAc,KAAK,QAAQ,CAAC;QACrD,IAAI,CAAC,IAAI,EAAE,CAAC;QACZ,IAAM,GAAG,GAAG;YACR,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACpB,cAAc,EAAE,CAAC;SACpB,CAAC;QACF,IAAI,CAAC,uBAAuB,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,aAAa,CAAC;YACvD,cAAc,IAAI,KAAK,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC,EAAE;YAC3D,IAAM,IAAI,GAAG,SAAS,GAAI,cAAyB,CAAC,aAAa,CAAC,GAAM,cAAc,SAAI,aAAe,CAAC;YAC1G,IAAI,UAAU,GAAM,IAAI,YAAS,CAAC;YAClC,IAAI,SAAS,IAAK,cAAyB,CAAI,aAAa,WAAQ,CAAC,EAAE;gBACnE,UAAU,GAAI,cAAyB,CAAI,aAAa,WAAQ,CAAC,CAAC;aACrE;YACD,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC,IAAI,EAAE;gBAC5B,IAAI,MAAA;gBACJ,MAAM,EAAE,UAAU;aACrB,EAAE,GAAG,CAAC,CAAC;SACX;aAAM;YACH,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;SAC5D;KACJ;IAEM,2BAAI,GAAX;QACI,IAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAC7B,IAAI,OAAO,EAAE;YACT,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACpB,OAAO,CAAC,IAAI,EAAE,CAAC;SAClB;KACJ;IAEM,6BAAM,GAAb;QACI,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;KACxD;IACL,mBAAC;CAAA,CAtEyCC,gBAAS;;AClBnD;AACA,AAQA,IAAM,UAAU,GAAG,gBAAc,IAAI,CAAC,GAAG,EAAI,CAAC;AAC9C,AAEA,8BAA8B,KAAoB;IAC9C,IAAM,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC;IAChC,IAAM,WAAW,GAAG,EAAE,CAAC;IACvB,QAAQ,CAAC,OAAO,CAAC,UAAC,KAAK;QACnB,IAAI,cAAc,CAAC,KAAK,CAAC,EAAE;YACvB,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE;gBACZ,KAAK,GAAGC,mBAAY,CAAC,KAAK,EAAE;oBACxB,GAAG,EAAE,UAAU;iBAClB,CAAC,CAAC;aACN;YACD,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SAC3B;KACJ,CAAC,CAAC;IACH,OAAO,WAAW,CAAC;CACtB;AAED;CACC;AAwBc;IAAsB,2BAAuC;IAwBxE,iBAAY,KAAoB,EAAE,CAAC;QAAnC,YACI,kBAAM,KAAK,EAAE,CAAC,CAAC,SAWlB;QAwHM,kBAAY,GAAG,UAAC,GAAG;;YAEtB,IAAI,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,EAAE;gBACxB,KAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;gBACxC,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,kBAAkB,CACrC,KAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAI,EAAE,GAAG,EAAE,OAAO,CAAC,CACjD,CAAC;aACL;SACJ,CAAA;QAEM,mBAAa,GAAG,UAAC,GAAG;YACvB,IAAI,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,EAAE;gBACxB,KAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;gBACxC,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,mBAAmB,CACtC,KAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAI,EAAE,GAAG,EAAE,QAAQ,CAAC,CAClD,CAAC;aACL;SACJ,CAAA;QAEM,sBAAgB,GAAG,UAAC,GAAG,EAAE,IAAI;YAChC,IAAM,KAAK,GAAG,KAAI,CAAC,KAAK,CAAC;YACzB,OAAO,KAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,CAAC;;YAExC,IAAI,KAAK,CAAC,SAAS,IAAI,KAAK,KAAK,KAAI,CAAC,SAAS,EAAE;gBAC7C,OAAO;aACV;YACD,IAAM,eAAe,GAAG,oBAAoB,CAAC,KAAK,CAAC,CAAC;YACpD,IAAI,CAAC,KAAI,CAAC,iBAAiB,CAAC,eAAe,EAAE,GAAG,CAAC,EAAE;;gBAE/C,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;aAC1B;iBAAM;gBACH,IAAI,IAAI,KAAK,QAAQ,EAAE;oBACnB,IAAIF,IAAQ,CAAC,mBAAmB,CAAC,KAAK,CAAC,EAAE;wBACrC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;wBACpB,KAAK,CAAC,KAAK,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;qBAC1B;iBACJ;qBAAM;oBACH,IAAIA,IAAQ,CAAC,kBAAkB,CAAC,KAAK,CAAC,EAAE;wBACpC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;wBACnB,KAAK,CAAC,KAAK,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;qBAC1B;iBACJ;aACJ;SACJ,CAAA;QAEM,kBAAY,GAAG,UAAC,GAAG;;YAEtB,IAAI,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,EAAE;gBACxB,KAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;gBACxC,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,kBAAkB,CAAC,KAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAI,EAAE,GAAG,CAAC,CAAC,CAAC;aACrF;SACJ,CAAA;QAEM,uBAAiB,GAAG,UAAC,GAAW;YACnC,IAAM,KAAK,GAAG,KAAI,CAAC,KAAK,CAAC;YACzB,OAAO,KAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,CAAC;;YAExC,IAAI,KAAK,CAAC,SAAS,IAAI,KAAK,KAAK,KAAI,CAAC,SAAS,EAAE;gBAC7C,OAAO;aACV;YACD,IAAM,eAAe,GAAG,oBAAoB,CAAC,KAAK,CAAC,CAAC;;YAEpD,IAAI,KAAI,CAAC,iBAAiB,CAAC,eAAe,EAAE,GAAG,CAAC,EAAE;gBAC9C,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;aAC1B;iBAAM;gBACH,IAAM,GAAG,GAAG;oBACR,IAAIA,IAAQ,CAAC,kBAAkB,CAAC,KAAK,CAAC,EAAE;wBACpC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;wBACnB,KAAK,CAAC,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;qBAC3B;iBACJ,CAAC;gBACF,IAAI,CAAC,cAAc,CAAC,KAAI,CAAC,KAAK,CAAC,QAAQ,EACnC,eAAe,EAAE,KAAK,CAAC,QAAQ,CAAC,EAAE;oBAClC,IAAI,WAAW,GAAG,IAAI,CAAC;oBACvB,IAAI,KAAK,CAAC,QAAQ,EAAE;wBAChB,WAAW,GAAG,eAAe,CAAC,GAAG,CAAC,UAAC,KAAK;4BACpC,IAAI,KAAK,CAAC,GAAG,KAAK,GAAG,EAAE;gCACnB,OAAOE,mBAAY,CACf,KAAK,EACL;oCACI,KAAK,EAAE,gBAAgB;iCAC1B,CACJ,CAAC;6BACL;iCAAM;gCACH,OAAO,KAAK,CAAC;6BAChB;yBACJ,CAAC,CAAC;qBACN;;oBAED,KAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,WAAW,IAAI,eAAe,CAAC;oBACrD,KAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;iBACzB;qBAAM;oBACH,GAAG,EAAE,CAAC;iBACT;aACJ;SACJ,CAAA;QAhOG,KAAI,CAAC,sBAAsB,GAAG,EAAE,CAAC;QACjC,KAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,KAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QAEtB,KAAI,CAAC,KAAK,GAAG;YACT,QAAQ,EAAE,oBAAoB,CAAC,KAAI,CAAC,KAAK,CAAC;SAC7C,CAAC;QAEF,KAAI,CAAC,YAAY,GAAG,EAAE,CAAC;;KAC1B;IAEM,mCAAiB,GAAxB;QAAA,iBAaC;QAZG,IAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;QACrC,IAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;QACnC,IAAI,QAAQ,EAAE;YACV,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,UAAC,KAAK;gBAC7B,OAAO,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;aACvC,CAAC,CAAC;SACN;QACD,QAAQ,CAAC,OAAO,CAAC,UAAC,KAAK;YACnB,IAAI,KAAK,EAAE;gBACP,KAAI,CAAC,aAAa,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;aACjC;SACJ,CAAC,CAAC;KACN;IAEM,2CAAyB,GAAhC,UAAiC,SAAS,EAAE,WAAW;QAAvD,iBA4FC;QA3FG,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC3B,IAAM,YAAY,GAAG,oBAAoB,CAAC,SAAS,CAAC,CAAC;QACrD,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;;QAEzB,IAAI,KAAK,CAAC,SAAS,EAAE;YACjB,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,OAAO,CAAC,UAAC,GAAG;gBACjD,KAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;aAClB,CAAC,CAAC;SACN;QACD,IAAM,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC;QAChC,IAAM,sBAAsB,GAAG,IAAI,CAAC,sBAAsB,CAAC;;QAE3D,IAAM,eAAe,GAAG,KAAK,CAAC,SAAS;YACnC,oBAAoB,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;;QAEtD,IAAI,WAAW,GAAG,EAAE,CAAC;QACrB,IAAI,QAAQ,EAAE;YACV,eAAe,CAAC,OAAO,CAAC,UAAC,YAAY;gBACjC,IAAM,SAAS,GAAG,YAAY,IAAI,wBAAwB,CAAC,YAAY,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC;gBAC3F,IAAI,QAAQ,CAAC;gBACb,IAAI,CAAC,CAAC,SAAS,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,YAAY,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE;oBACtF,QAAQ,GAAGA,mBAAY,CAAC,SAAS,IAAI,YAAY;wBAC7C,GAAC,QAAQ,IAAG,IAAI;wBAChB,QAAK,GAAE,EAAE;4BACX,CAAC;iBACN;qBAAM;oBACH,QAAQ,GAAG,SAAS,CAAC;iBACxB;gBACD,IAAI,QAAQ,EAAE;oBACV,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAC9B;;aACJ,CAAC,CAAC;YACH,YAAY,CAAC,OAAO,CAAC,UAAC,SAAS;gBAC3B,IAAI,CAAC,SAAS,IAAI,CAAC,wBAAwB,CAAC,eAAe,EAAE,SAAS,CAAC,GAAG,CAAC,EAAE;oBACzE,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;iBAC/B;aACJ,CAAC,CAAC;SACN;aAAM;YACH,WAAW,GAAG,aAAa,CACvB,eAAe,EACf,YAAY,CACf,CAAC;SACL;;QAGD,IAAI,CAAC,QAAQ,CAAC;YACV,QAAQ,EAAE,WAAW;SACxB,CAAC,CAAC;QAEH,YAAY,CAAC,OAAO,CAAC,UAAC,KAAK;YACvB,IAAM,GAAG,GAAG,KAAK,IAAI,KAAK,CAAC,GAAG,CAAC;YAC/B,IAAI,KAAK,IAAI,sBAAsB,CAAC,GAAG,CAAC,EAAE;gBACtC,OAAO;aACV;YACD,IAAM,OAAO,GAAG,KAAK,IAAI,wBAAwB,CAAC,eAAe,EAAE,GAAG,CAAC,CAAC;YACxE,IAAI,QAAQ,EAAE;gBACV,IAAM,UAAU,GAAG,KAAK,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;gBAC9C,IAAI,OAAO,EAAE;oBACT,IAAM,SAAS,GAAG,6BAA6B,CAAC,eAAe,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;oBAChF,IAAI,CAAC,SAAS,IAAI,UAAU,EAAE;wBAC9B,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;qBAC1B;iBACJ;qBAAM,IAAI,UAAU,EAAE;oBACnB,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;iBAC9B;aACJ;iBAAM,IAAI,CAAC,OAAO,EAAE;gBACjB,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;aAC9B;SACJ,CAAC,CAAC;QAEH,eAAe,CAAC,OAAO,CAAC,UAAC,KAAK;YAC1B,IAAM,GAAG,GAAG,KAAK,IAAI,KAAK,CAAC,GAAG,CAAC;YAC/B,IAAI,KAAK,IAAI,sBAAsB,CAAC,GAAG,CAAC,EAAE;gBACtC,OAAO;aACV;YACD,IAAM,OAAO,GAAG,KAAK,IAAI,wBAAwB,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC;YACrE,IAAI,QAAQ,EAAE;gBACV,IAAM,SAAS,GAAG,KAAK,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;gBAC7C,IAAI,OAAO,EAAE;oBACT,IAAM,UAAU,GAAG,6BAA6B,CAAC,YAAY,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;oBAC9E,IAAI,CAAC,UAAU,IAAI,SAAS,EAAE;wBAC1B,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;qBAC9B;iBACJ;qBAAM,IAAI,SAAS,EAAE;oBAClB,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;iBAC9B;aACJ;iBAAM,IAAI,CAAC,OAAO,EAAE;gBACjB,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;aAC9B;SACJ,CAAC,CAAC;KAEN;IAEM,oCAAkB,GAAzB;QACI,IAAM,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;QACrC,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACvC,IAAM,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;QACrC,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;KAC1C;IAmGM,mCAAiB,GAAxB,UAAyB,eAAe,EAAE,GAAG;QACzC,IAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;QACrC,IAAI,QAAQ,EAAE;YACV,OAAO,6BAA6B,CAAC,eAAe,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;SACxE;QACD,OAAO,wBAAwB,CAAC,eAAe,EAAE,GAAG,CAAC,CAAC;KACzD;IAEM,sBAAI,GAAX,UAAY,GAAW;QACnB,OAAO,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,CAAC;QACxC,IAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;QACzC,IAAI,SAAS,EAAE;YACX,SAAS,CAAC,IAAI,EAAE,CAAC;SACpB;KACJ;IAEM,wBAAM,GAAb;QAAA,iBA2CC;QA1CG,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QACzB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAM,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;QAC1C,IAAI,QAAQ,GAAG,IAAI,CAAC;QACpB,IAAI,aAAa,EAAE;YACf,QAAQ,GAAG,aAAa,CAAC,GAAG,CAAC,UAAC,KAAK;gBACnC,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,SAAS,EAAE;oBACvC,OAAO,KAAK,CAAC;iBAChB;gBACD,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE;oBACZ,MAAM,IAAI,KAAK,CAAC,wCAAwC,CAAC,CAAC;iBAC7D;gBACD,IAAM,MAAM,GAAG,UAAC,IAAI;oBAChB,KAAI,CAAC,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;iBACvC,CAAC;gBACF,OAAOJ,QAAC,CACH,YAAoB,EACrB;oBACI,GAAG,EAAE,KAAK,CAAC,GAAG;oBACd,GAAG,EAAE,MAAM;oBACX,SAAS,EAAE,KAAK,CAAC,SAAS;oBAC1B,eAAe,EAAE,KAAK,CAAC,eAAe;oBACtC,gBAAgB,EAAE,KAAK,CAAC,gBAAgB;oBACxC,cAAc,EAAE,KAAK,CAAC,cAAc;oBACpC,eAAe,EAAE,KAAK,CAAC,eAAe;iBACzC,EACD,KAAK,CAAC,CAAC;aACV,CAAC,CAAC;SACN;QACD,IAAM,UAAU,GAAG,KAAK,CAAC,SAAS,CAAC;QACnC,IAAI,UAAU,EAAE;YACZ,IAAI,WAAW,GAAQ,KAAK,CAAC;YAC7B,IAAI,OAAO,UAAU,KAAK,QAAQ,EAAE;gBAChC,WAAW,cACP,SAAS,EAAE,KAAK,CAAC,SAAS,EAC1B,KAAK,EAAE,KAAK,CAAC,KAAK,IACf,KAAK,CAAC,cAAc,CAC1B,CAAC;aACL;YACD,OAAOA,QAAC,CAAC,UAAU,eAAM,WAAW,GAAG,QAAQ,CAAC,CAAC;SACpD;QACD,OAAO,QAAQ,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;KAC9B;IA7Sa,oBAAY,GAAG;QACzB,SAAS,EAAE,EAAE;QACb,SAAS,EAAE,MAAM;QACjB,cAAc,EAAE,EAAE;QAClB,eAAe,EAAE,IAAI;QACrB,eAAe,EAAE,IAAI;QACrB,gBAAgB,EAAE,KAAK;QACvB,KAAK,EAAE,IAAI;QACX,OAAO,EAAE,IAAI;QACb,OAAO,EAAE,IAAI;QACb,QAAQ,EAAE,IAAI;KACjB,CAAC;IAmSN,cAAC;CAAA,CAzToCG,gBAAS;;;;;;;;"}